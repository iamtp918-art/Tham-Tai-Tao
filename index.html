<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>THẮM SPA TÁI TẠO – Mỹ phẩm & chăm sóc da</title>
  <meta name="description" content="THẮM SPA TÁI TẠO – Sản phẩm kem làm đẹp, serum, tái tạo da. Đặt hàng nhanh, tư vấn miễn phí. Ấp Bến Chùa, xã Thanh An, TP.HCM. Hotline/Zalo: 0965896147" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      /* Dark theme (default) */
      --bg:#0c0c12;             /* page bg */
      --panel:#121225;          /* cards */
      --panel-2:#0e0e1a;        /* alt panel */
      --text:#eef0ff;           /* main text */
      --muted:#a5aac5;          /* secondary text */
      --primary:#ff6aa2;        /* rose neon */
      --primary-2:#ff92bd;      /* rose light */
      --mint:#8af3e2;           /* mint accent */
      --gold:#ffd479;           /* gold accent */
      --ok:#2bd576;
      --danger:#ff6b6b;
      --radius:20px;
      --shadow:0 12px 34px rgba(0,0,0,.35), 0 1px 0 rgba(255,255,255,.03) inset;
      --border:1px solid #ffffff18;
    }
    [data-theme="light"]{
      --bg:#f7f8fb;
      --panel:#ffffff;
      --panel-2:#ffffff;
      --text:#0e1020;
      --muted:#5a6279;
      --shadow:0 12px 34px rgba(10,18,40,.08);
      --border:1px solid #e8ecff;
    }

    html,body{height:100%}
    *{box-sizing:border-box}
    body{
      margin:0; color:var(--text); background:
        radial-gradient(1000px 600px at -10% -10%, #2e1b2c 0%, rgba(46,27,44,0) 60%),
        radial-gradient(1000px 600px at 110% 10%, #0e2a29 0%, rgba(14,42,41,0) 60%),
        var(--bg);
      font-family:"Plus Jakarta Sans", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      overflow-x:hidden;
    }
    a{color:inherit; text-decoration:none}
    .container{width:min(1200px, 92vw); margin:0 auto}

    /* NAV */
    .nav{position:sticky; top:0; z-index:30; backdrop-filter:saturate(150%) blur(8px); background:linear-gradient(180deg, rgba(12,12,18,.85), rgba(12,12,18,.55)); border-bottom:var(--border)}
    [data-theme="light"] .nav{background:rgba(255,255,255,.7)}
    .nav-inner{display:flex; align-items:center; justify-content:space-between; padding:14px 0}
    .logo{display:flex; align-items:center; gap:12px; font-weight:800}
    .mark{width:40px; height:40px; border-radius:14px; display:grid; place-items:center; background:conic-gradient(from 0deg, var(--primary), var(--gold), var(--mint), var(--primary)); box-shadow:0 0 20px #ff6aa255, 0 0 26px #8af3e244}
    .brand{font-size:18px; letter-spacing:.3px}
    .nav-links{display:flex; gap:18px; align-items:center}
    .nav-actions{display:flex; gap:10px; align-items:center}
    .btn{border:none; border-radius:999px; padding:12px 16px; font-weight:700; cursor:pointer; box-shadow:var(--shadow)}
    .btn-primary{background:linear-gradient(90deg, var(--primary), var(--primary-2)); color:#fff}
    .btn-ghost{background:#ffffff12; color:#fff; border:var(--border)}
    [data-theme="light"] .btn-ghost{background:#f2f5ff; color:#0e1020}
    .btn-icon{width:42px; height:42px; display:grid; place-items:center; border-radius:50%}

    /* HERO */
    .hero{padding:68px 0 38px}
    .grid-hero{display:grid; grid-template-columns:1.1fr .9fr; gap:36px; align-items:center}
    @media (max-width: 1024px){.grid-hero{grid-template-columns:1fr}}
    h1{font-size:clamp(32px, 4.8vw, 56px); line-height:1.06; margin:0 0 14px}
    .lead{font-size:clamp(16px,1.6vw,18px); color:var(--muted); margin:0 0 22px}
    .badges{display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-top:22px}
    .badge{display:flex; align-items:center; gap:10px; padding:12px 14px; border-radius:14px; background:#ffffff0e; border:var(--border)}

    .hero-art{position:relative; border:var(--border); border-radius:var(--radius); padding:22px; background:linear-gradient(130deg, #ff6aa214, #8af3e21a); box-shadow:var(--shadow)}
    .ring{position:absolute; inset:-30px; border-radius:22px; pointer-events:none; border:2px dashed #ffffff22; animation:ring 12s linear infinite; opacity:.35}
    @keyframes ring{to{transform:rotate(360deg)}}

    /* SECTION */
    .section{padding:38px 0 68px}
    .section h2{font-size:clamp(24px, 3vw, 36px); margin:0 0 10px}
    .sub{color:var(--muted); margin:0 0 18px}

    /* Controls */
    .controls{display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin:10px 0 20px}
    .pill{display:flex; gap:8px; align-items:center; padding:10px 16px; border-radius:999px; border:1px solid #ffffff33; background:#ffffff22; color:#ffffffee; font-weight:800; letter-spacing:.2px; cursor:pointer; text-shadow:0 1px 1px #0006}
    .pill:hover{background:#ffffff35}
    [data-theme="light"] .pill{background:#eff3ff; border:1px solid #d9e2ff; color:#0e1020; text-shadow:none}
    .pill.active{background:linear-gradient(90deg, rgba(255,106,162,.38), rgba(138,243,226,.26)); border-color:#ffffff66}
    [data-theme="light"] .pill.active{background:linear-gradient(90deg, #ffe7f1, #eafffb); border-color:#c7d2ff}
    .pill:focus-visible{outline:2px solid var(--mint); outline-offset:2px}
    .input{background:var(--panel-2); border:var(--border); border-radius:999px; padding:10px 14px; color:var(--text); min-width:220px}
    .select{appearance:none}

    /* Grid */
    .grid{display:grid; grid-template-columns:repeat(4,1fr); gap:16px}
    @media (max-width: 1100px){.grid{grid-template-columns:repeat(3,1fr)}}
    @media (max-width: 820px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width: 520px){.grid{grid-template-columns:1fr}}

    .card{position:relative; border-radius:22px; overflow:hidden; border:var(--border); background:linear-gradient(180deg, var(--panel), var(--panel-2)); box-shadow:var(--shadow)}
    .thumb{aspect-ratio: 4/3; display:grid; place-items:center; background: radial-gradient(360px 220px at 70% 20%, #ffffff0a, #ffffff00 60%), var(--panel-2); border-bottom:var(--border)}
    .content{padding:14px}
    .row{display:flex; align-items:center; justify-content:space-between; gap:8px}
    .price{font-weight:800; font-size:18px}
    .old{opacity:.6; text-decoration:line-through; font-weight:600; font-size:12px; margin-left:8px}
    .rating{display:flex; gap:2px; align-items:center}
    .add{margin-top:12px; width:100%}
    .chip{padding:3px 8px; border-radius:999px; background:#ffffff12; border:var(--border); font-size:12px}

    /* Promo */
    .promo{margin:22px 0 12px; padding:16px; border-radius:18px; border:var(--border); background:linear-gradient(100deg, #ff6aa226, #8af3e222); display:flex; align-items:center; justify-content:space-between; gap:14px}
    .promo strong{font-size:18px}

    /* Testimonials + Contact */
    .t-grid{display:grid; grid-template-columns:repeat(3,1fr); gap:14px}
    @media (max-width: 960px){.t-grid{grid-template-columns:1fr 1fr}}
    @media (max-width: 620px){.t-grid{grid-template-columns:1fr}}
    .t{border:var(--border); background:var(--panel); border-radius:18px; padding:16px; box-shadow:var(--shadow)}
    .who{display:flex; align-items:center; gap:10px; margin-bottom:8px}
    .avatar{width:38px; height:38px; border-radius:50%; background:linear-gradient(120deg, #ff9ec1, #88f6ea)}

    /* Footer */
    footer{border-top:var(--border); padding:26px 0 60px; margin-top:30px; background:linear-gradient(180deg, transparent, rgba(0,0,0,.12))}
    .foot{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap}
    .led{font-weight:800; letter-spacing:.2px; --g:linear-gradient(90deg,#ff6aa2,#ffd479,#8af3e2,#a7ff6a,#ff6aa2); background:var(--g); -webkit-background-clip:text; background-clip:text; color:transparent; text-shadow:0 0 16px #ffffff20; animation: hue 6s linear infinite}
    @keyframes hue{ to{ filter:hue-rotate(360deg) }}

    /* Drawer Cart */
    .drawer{position:fixed; top:0; right:0; width:min(420px, 92vw); height:100%; background:var(--panel-2); border-left:var(--border); transform:translateX(100%); transition:.32s ease; box-shadow:-24px 0 60px rgba(0,0,0,.4); z-index:35; display:flex; flex-direction:column}
    .drawer.open{transform:translateX(0)}
    .drawer-head{display:flex; align-items:center; justify-content:space-between; padding:16px; border-bottom:var(--border)}
    .cart-items{padding:14px; overflow:auto; flex:1; display:flex; flex-direction:column; gap:12px}
    .cart-row{display:grid; grid-template-columns:auto 1fr auto; gap:10px; align-items:center; border:var(--border); background:var(--panel); padding:10px; border-radius:14px}
    .cart-thumb{width:44px; height:44px; display:grid; place-items:center; background:var(--panel-2); border-radius:12px; border:var(--border)}
    .cart-foot{padding:14px; border-top:var(--border)}

    /* FABs */
    .cart-fab{position:fixed; right:16px; bottom:16px; width:64px; height:64px; display:grid; place-items:center; border-radius:50%; background:linear-gradient(90deg, var(--mint), #aef7ee); border:1px solid #ffffff66; box-shadow:0 14px 40px rgba(0,0,0,.35); z-index:32; cursor:pointer}
    .cart-fab .count{position:absolute; top:-6px; right:-6px; width:26px; height:26px; display:grid; place-items:center; background:var(--primary); color:#fff; font-weight:800; border-radius:50%; font-size:12px; border:2px solid #0d0d16}
    .zalo-fab{position:fixed; left:16px; bottom:16px; width:auto; display:flex; gap:10px; align-items:center; padding:12px 16px; border-radius:999px; background:linear-gradient(90deg,#0068ff,#33a3ff); color:#fff; box-shadow:0 14px 40px rgba(0,0,0,.35); z-index:32}

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){ .ring, .led{animation:none} }
  /* === Hiệu ứng nâng cấp giao diện === */
    .auroras{position:fixed; inset:-20% -20% auto -20%; height:68vh; pointer-events:none; z-index:-1; filter:blur(60px); opacity:.5}
    .auroras .a{position:absolute; width:42vw; height:42vw; border-radius:50%}
    .auroras .a1{background:radial-gradient(circle at 50% 50%, #ff6aa244, transparent 60%); top:-12vh; left:8vw; animation:float 16s ease-in-out infinite}
    .auroras .a2{background:radial-gradient(circle at 50% 50%, #8af3e244, transparent 60%); top:10vh; right:6vw; animation:float 20s ease-in-out infinite reverse}
    .auroras .a3{background:radial-gradient(circle at 50% 50%, #ffd47944, transparent 60%); bottom:-8vh; left:20vw; animation:float 22s ease-in-out infinite}
    [data-theme="light"] .auroras{opacity:.28; filter:blur(50px)}
    @keyframes float{0%,100%{transform:translate3d(0,0,0)}50%{transform:translate3d(2vw,-6vh,0)}}

    .sparkles{position:fixed; inset:0; pointer-events:none; z-index:-1}
    .sparkles:before,.sparkles:after{content:""; position:absolute; inset:-10% -10%; background:
      radial-gradient(#ffffff66 1px, transparent 2px) 0 0/32px 32px,
      radial-gradient(#ffffff33 1px, transparent 2px) 16px 16px/32px 32px; filter:blur(.4px); opacity:.25; animation:sparkle 60s linear infinite}
    .sparkles:after{opacity:.15; animation-duration:90s}
    @keyframes sparkle{to{transform:translateY(-140px)}}

    .progress{position:fixed; top:0; left:0; right:0; height:3px; background:transparent; z-index:40}
    .progress span{display:block; height:100%; width:0; background:linear-gradient(90deg, var(--mint), var(--primary)); box-shadow:0 0 12px var(--primary)}
    .nav.scrolled{box-shadow:0 8px 30px rgba(0,0,0,.25); background:linear-gradient(180deg, rgba(12,12,18,.92), rgba(12,12,18,.7))}
    [data-theme="light"] .nav.scrolled{background:rgba(255,255,255,.92)}

    .btn-primary{position:relative; overflow:hidden}
    .btn-primary:after{content:""; position:absolute; inset:0; background:linear-gradient(120deg, transparent 30%, #ffffff80 50%, transparent 70%); transform:translateX(-120%)}
    .btn-primary:hover:after{transition:transform .7s ease; transform:translateX(120%)}

    .card{transition:transform .28s ease, box-shadow .28s ease}
    .card:hover{transform:translateY(-4px); box-shadow:0 18px 50px rgba(0,0,0,.45)}
    .card::before{content:""; position:absolute; inset:0; border-radius:22px; padding:1px; background:linear-gradient(120deg, #ffffff20, #ffffff05); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude; pointer-events:none}
    .card:hover::before{background:linear-gradient(120deg, var(--primary), var(--mint)); opacity:.7}
    .tilt{transform-style:preserve-3d; will-change:transform}

    .fx-reveal{opacity:0; transform:translateY(14px) scale(.98); transition:opacity .6s ease, transform .6s ease}
    .fx-reveal.inview{opacity:1; transform:none}

    /* Map embed */
    .map-wrap{position:relative; width:100%; aspect-ratio:16/9; border-radius:16px; overflow:hidden; border:var(--border); box-shadow:var(--shadow)}
    .map-wrap iframe{position:absolute; inset:0; width:100%; height:100%; border:0}
  </style>
</head>
<body>
  <div class="auroras" aria-hidden="true"><span class="a a1"></span><span class="a a2"></span><span class="a a3"></span></div>
  <div class="sparkles" aria-hidden="true"></div>
  <div class="progress"><span id="progressBar"></span></div>
  <!-- NAVBAR -->
  <nav class="nav">
    <div class="container nav-inner">
      <a href="#" class="logo" aria-label="THẮM SPA TÁI TẠO">
        <span class="mark">✨</span>
        <span class="brand">THẮM SPA TÁI TẠO</span>
      </a>
      <div class="nav-links">
        <a href="#menu">Sản phẩm</a>
        <a href="#promo">Ưu đãi</a>
        <a href="#reviews">Đánh giá</a>
        <a href="#contact">Liên hệ</a>
      </div>
      <div class="nav-actions">
        <button id="toggleTheme" class="btn btn-ghost" aria-label="Chuyển chế độ sáng/tối">🌓</button>
        <button class="btn btn-primary" onclick="scrollToMenu()">Đặt hàng ngay</button>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="hero">
    <div class="container grid-hero">
      <div>
        <h1>Kem làm đẹp & tái tạo da – <span style="color:var(--gold); text-shadow:0 0 12px #ffd47955">an toàn</span>, <span style="color:var(--mint); text-shadow:0 0 12px #8af3e255">hiệu quả</span></h1>
        <p class="lead">
          Spa chính hãng tại <strong>Ấp Bến Chùa, xã Thanh An, TP.HCM</strong>. Tư vấn chuẩn routine – 
          <strong style="color:var(--ok)">giao nhanh trong ngày</strong>. Hotline/Zalo: <a href="tel:0965896147">0965 896 147</a>.
        </p>
        <div class="cta">
          <button class="btn btn-primary" onclick="scrollToMenu()">Khám phá sản phẩm</button>
          <a class="btn btn-ghost" href="#promo">Xem khuyến mãi</a>
        </div>
        <div class="badges" aria-label="Cam kết">
          <div class="badge"> 
            <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 2l2.9 6.6 7.1.6-5.3 4.6 1.6 6.9L12 17.8 5.7 20.7l1.6-6.9L2 9.2l7.1-.6L12 2z"/></svg>
            Công thức dịu nhẹ
          </div>
          <div class="badge">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><circle cx="12" cy="12" r="9"/><path d="M12 7v6l4 2"/></svg>
            Giao nhanh trong ngày
          </div>
          <div class="badge">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6"><path d="M12 3l8 4v6c0 5-8 8-8 8s-8-3-8-8V7l8-4z"/></svg>
            Đổi trả 7 ngày
          </div>
        </div>
      </div>
      <div class="hero-art">
        <div class="ring" aria-hidden="true"></div>
        <svg viewBox="0 0 480 360" role="img" aria-label="Minh hoạ dưỡng da" style="width:100%">
          <defs>
            <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#ffb3cf"/><stop offset="1" stop-color="#ffe1ee"/></linearGradient>
            <linearGradient id="g2" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#c7fff4"/><stop offset="1" stop-color="#eafffb"/></linearGradient>
          </defs>
          <ellipse cx="240" cy="320" rx="160" ry="22" fill="#000" opacity=".22"/>
          <rect x="130" y="110" width="220" height="160" rx="20" fill="url(#g2)" stroke="#a5e9dd"/>
          <circle cx="190" cy="160" r="28" fill="url(#g1)"/>
          <rect x="250" y="150" width="70" height="12" rx="6" fill="#222" opacity=".25"/>
          <rect x="250" y="170" width="90" height="12" rx="6" fill="#222" opacity=".25"/>
          <rect x="250" y="190" width="60" height="12" rx="6" fill="#222" opacity=".25"/>
          <g transform="translate(70,20)">
            <rect x="0" y="210" width="70" height="110" rx="10" fill="#f5d2e1" stroke="#f2b7cf"/>
            <rect x="90" y="190" width="70" height="130" rx="10" fill="#cbeeed" stroke="#b2e4e2"/>
            <rect x="180" y="220" width="70" height="100" rx="10" fill="#ffe6b5" stroke="#ffd479"/>
          </g>
        </svg>
      </div>
    </div>
  </header>

  <!-- MENU / PRODUCTS -->
  <section class="section" id="menu">
    <div class="container">
      <h2>Sản phẩm nổi bật</h2>
      <p class="sub">Chọn đúng vấn đề da – thêm vào giỏ cực nhanh.</p>

      <div class="controls">
        <button class="pill active" data-category="all">Tất cả</button>
        <button class="pill" data-category="Serum">Serum</button>
        <button class="pill" data-category="Kem dưỡng">Kem dưỡng</button>
        <button class="pill" data-category="Sữa rửa mặt">Sữa rửa mặt</button>
        <button class="pill" data-category="Chống nắng">Chống nắng</button>
        <button class="pill" data-category="Combo">Combo</button>
        <input id="search" class="input" placeholder="Tìm: vitamin C, ceramide…"/>
        <select id="sort" class="input select" aria-label="Sắp xếp">
          <option value="popular">Phổ biến</option>
          <option value="price-asc">Giá tăng dần</option>
          <option value="price-desc">Giá giảm dần</option>
          <option value="name">Theo tên</option>
        </select>
      </div>

      <div class="promo" id="promo">
        <div>
          <div style="opacity:.8">Ưu đãi khai trương • Mã: <span class="chip">THAM15</span></div>
          <strong>Giảm 15% cho đơn đầu tiên</strong>
        </div>
        <button class="btn btn-ghost" onclick="copyCode()">Sao chép mã</button>
      </div>

      <div class="grid" id="grid"></div>
    </div>
  </section>

  <!-- REVIEWS -->
  <section class="section" id="reviews">
    <div class="container">
      <h2>Khách hàng nói gì?</h2>
      <div class="t-grid">
        <div class="t">
          <div class="who"><div class="avatar"></div><div><strong>Thu Hằng</strong><div style="opacity:.7; font-size:12px">Da hỗn hợp</div></div></div>
          <div id="r1"></div>
        </div>
        <div class="t">
          <div class="who"><div class="avatar" style="background:linear-gradient(120deg,#ffd166,#88f6ea)"></div><div><strong>Hữu Tín</strong><div style="opacity:.7; font-size:12px">Da dầu</div></div></div>
          <div id="r2"></div>
        </div>
        <div class="t">
          <div class="who"><div class="avatar" style="background:linear-gradient(120deg,#9bdcfb,#ffa9cd)"></div><div><strong>Mai Anh</strong><div style="opacity:.7; font-size:12px">Da khô</div></div></div>
          <div id="r3"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section class="section" id="contact">
    <div class="container">
      <h2>Liên hệ & Cửa hàng</h2>
      <p class="sub">Địa chỉ: <strong>Ấp Bến Chùa, xã Thanh An, Thành Phố Hồ Chí Minh</strong></p>
      <div class="t-grid" style="grid-template-columns:1.2fr .8fr">
        <div class="t">
          <h3 style="margin:0 0 8px">THẮM SPA TÁI TẠO</h3>
          <p style="margin:6px 0 12px">Hotline/Zalo: <a class="chip" href="tel:0965896147">0965 896 147</a> · <a class="chip" href="https://zalo.me/0965896147" target="_blank" rel="noopener">Chat Zalo</a></p>
          <ul style="margin:0; padding-left:18px; line-height:1.9">
            <li>Tư vấn routine miễn phí theo loại da</li>
            <li>Freeship đơn từ 500.000đ (nội thành)</li>
            <li>Nhận COD – kiểm tra hàng trước khi thanh toán</li>
          </ul>
          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:14px">
            <a class="btn btn-primary" href="#menu">Đặt ngay</a>
            <a class="btn btn-ghost" href="https://zalo.me/0965896147" target="_blank" rel="noopener">Nhắn Zalo</a>
          </div>
        </div>
        <div class="t">
          <div class="map-wrap">
            <iframe src="https://www.google.com/maps?q=11.180714207339738,106.41306209718614&z=14&output=embed" loading="lazy" referrerpolicy="no-referrer-when-downgrade" allowfullscreen></iframe>
          </div>
          <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap">
            <a class="btn btn-ghost" href="https://www.google.com/maps?q=11.180714207339738,106.41306209718614&z=14" target="_blank" rel="noopener">Mở trên Google Maps</a>
            <a class="btn btn-primary" href="https://www.google.com/maps/dir/?api=1&destination=11.180714207339738,106.41306209718614" target="_blank" rel="noopener">Chỉ đường</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container foot">
      <div>© 2025 · <span class="led">THẮM SPA TÁI TẠO</span></div>
      <div style="opacity:.85">Lưu ý: Sản phẩm mỹ phẩm – không phải thuốc, không thay thế chỉ định y khoa.</div>
    </div>
  </footer>

  <!-- Drawer Cart -->
  <aside class="drawer" id="cart">
    <div class="drawer-head">
      <strong>Giỏ hàng</strong>
      <button class="btn btn-ghost btn-icon" onclick="toggleCart(false)" aria-label="Đóng">✖</button>
    </div>
    <div class="cart-items" id="cartItems"></div>
    <div class="cart-foot">
      <div class="row" style="margin-bottom:10px">
        <div>Tạm tính</div>
        <div id="subtotal" class="price">0₫</div>
      </div>
      <div class="row" style="margin-bottom:12px">
        <div>Khuyến mãi <span class="chip">THAM15</span></div>
        <div id="discount">-0₫</div>
      </div>
      <div class="row" style="margin-bottom:12px">
        <div><strong>Thành tiền</strong></div>
        <div id="total" class="price">0₫</div>
      </div>
      <button class="btn btn-primary" style="width:100%" onclick="checkout()">Thanh toán</button>
    </div>
  </aside>

  <!-- Floating Buttons -->
  <button class="cart-fab" onclick="toggleCart(true)" aria-label="Mở giỏ hàng">🧺<div class="count" id="cartCount">0</div></button>
  <a class="zalo-fab" href="https://zalo.me/0965896147" target="_blank" rel="noopener" aria-label="Nhắn Zalo">💬 Zalo 0965 896 147</a>

  <script>
    // ===== Data =====
    const PRODUCTS = [
      {id:'serum-c', name:'Serum Vitamin C 15%', price:480000, rating:4.9, category:'Serum', color:'#ffd7e7'},
      {id:'serum-ha', name:'Serum HA Cấp Ẩm', price:390000, rating:4.8, category:'Serum', color:'#d7fff7'},
      {id:'cream-bright', name:'Kem Dưỡng Trắng Da', price:350000, rating:4.7, category:'Kem dưỡng', color:'#fff1d6'},
      {id:'cream-regen', name:'Kem Tái Tạo Ban Đêm', price:420000, rating:4.9, category:'Kem dưỡng', color:'#ffe5f1'},
      {id:'cleanser-gentle', name:'Sữa Rửa Mặt Dịu Nhẹ', price:220000, rating:4.6, category:'Sữa rửa mặt', color:'#e6f6ff'},
      {id:'sunscreen-spf50', name:'Kem Chống Nắng SPF50+', price:310000, rating:4.8, category:'Chống nắng', color:'#fff1bf'},
      {id:'combo-regen', name:'Combo Tái Tạo 3 Món', price:1080000, old:1250000, rating:5.0, category:'Combo', color:'#e9e6ff'},
      {id:'cream-ceramide', name:'Kem Dưỡng Ẩm Ceramide', price:360000, rating:4.7, category:'Kem dưỡng', color:'#e7f5ff'},
      {id:'peel-enzyme', name:'Tẩy Tế Bào Chết Enzyme', price:280000, rating:4.6, category:'Sữa rửa mặt', color:'#f4eaff'}
    ];

    // ===== State =====
    const state = { category:'all', q:'', sort:'popular', cart: load('cart', []) };

    // ===== Elements =====
    const grid = document.getElementById('grid');
    const search = document.getElementById('search');
    const sort = document.getElementById('sort');
    const pills = [...document.querySelectorAll('.pill')];

    // ===== Controls =====
    pills.forEach(p=>p.addEventListener('click', ()=>{
      pills.forEach(x=>x.classList.remove('active'));
      p.classList.add('active');
      state.category = p.dataset.category;
      render();
    }));
    search.addEventListener('input', e=>{ state.q = e.target.value.trim().toLowerCase(); render();});
    sort.addEventListener('change', e=>{ state.sort = e.target.value; render();});

    // ===== Render =====
    function render(){
      grid.innerHTML = '';
      let items = PRODUCTS.slice();
      if(state.category !== 'all') items = items.filter(i=> i.category === state.category);
      if(state.q) items = items.filter(i=> i.name.toLowerCase().includes(state.q));
      if(state.sort==='price-asc') items.sort((a,b)=>a.price-b.price);
      if(state.sort==='price-desc') items.sort((a,b)=>b.price-a.price);
      if(state.sort==='name') items.sort((a,b)=>a.name.localeCompare(b.name));
      if(state.sort==='popular') items.sort((a,b)=> b.rating - a.rating || a.price - b.price);
      if(!items.length){ grid.innerHTML = `<div style="opacity:.8">Không tìm thấy sản phẩm phù hợp.</div>`; return; }
      for(const it of items){ grid.appendChild(card(it)); }
    }

    function card(it){
      const el = document.createElement('article');
      el.className = 'card tilt fx-reveal';
      el.innerHTML = `
        <div class="thumb">${bottleSVG(it.color)}</div>
        <div class="content">
          <div class="row"><strong>${it.name}</strong> <div class="rating">${stars(it.rating)}</div></div>
          <div class="row"><div class="price">${money(it.price)}</div> ${it.old ? `<span class="old">${money(it.old)}</span>` : ''}</div>
          <button class="btn btn-primary add" aria-label="Thêm ${it.name} vào giỏ">Thêm vào giỏ</button>
          <div style="margin-top:10px; display:flex; gap:6px; flex-wrap:wrap">
            <span class="chip">${it.category}</span>
            <span class="chip">${it.rating.toFixed(1)}★</span>
          </div>
        </div>`;
      el.querySelector('.add').addEventListener('click', ()=> addToCart(it));
      return el;
    }

    // ===== SVG helpers =====
    function stars(n){ const k=5; let out=''; for(let i=0;i<k;i++){ out+=`<span style="opacity:${i<n?1:.25}">★</span>` } return out }
    function bottleSVG(color){
      return `<svg viewBox="0 0 120 90" role="img" aria-label="Mỹ phẩm"><defs><linearGradient id="b1" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="${color}"/><stop offset="1" stop-color="#ffffff" stop-opacity=".2"/></linearGradient></defs>
        <ellipse cx="60" cy="80" rx="38" ry="7" fill="#000" opacity=".25"/>
        <rect x="46" y="20" width="28" height="40" rx="6" fill="url(#b1)" stroke="#d8d8d8"/>
        <rect x="50" y="14" width="20" height="8" rx="3" fill="#c7c7c7"/>
        <rect x="48" y="62" width="24" height="10" rx="5" fill="#f3c27a" stroke="#e2a24b"/>
      </svg>`
    }

    // ===== Cart =====
    const cartEl = document.getElementById('cart');
    const cartList = document.getElementById('cartItems');
    const cartCount = document.getElementById('cartCount');

    function addToCart(it){
      const found = state.cart.find(x=>x.id===it.id);
      if(found) found.qty++; else state.cart.push({id:it.id, name:it.name, price:it.price, color:it.color, qty:1});
      save('cart', state.cart); updateCartUI(); toggleCart(true);
    }
    function removeFromCart(id){ const idx = state.cart.findIndex(x=>x.id===id); if(idx>-1){ state.cart.splice(idx,1); save('cart', state.cart); updateCartUI(); } }
    function changeQty(id, d){ const it = state.cart.find(x=>x.id===id); if(!it) return; it.qty+=d; if(it.qty<1) it.qty=1; save('cart', state.cart); updateCartUI(); }
    function toggleCart(open){ cartEl.classList.toggle('open', open); }
    function updateCartUI(){
      cartList.innerHTML = '';
      let sub=0; for(const it of state.cart){ sub+= it.price*it.qty; cartList.appendChild(cartRow(it)) }
      const hasCode = window.localStorage.getItem('promo')==='THAM15';
      const disc = hasCode ? Math.round(sub*0.15) : 0;
      byId('subtotal').textContent = money(sub);
      byId('discount').textContent = '-' + money(disc);
      byId('total').textContent = money(sub-disc);
      cartCount.textContent = state.cart.reduce((a,b)=>a+b.qty,0);
    }
    function cartRow(it){
      const el = document.createElement('div'); el.className='cart-row';
      el.innerHTML = `
        <div class="cart-thumb">${miniThumb(it.color)}</div>
        <div>
          <div style="font-weight:700">${it.name}</div>
          <div style="opacity:.8">${money(it.price)} · SL: <button class="btn btn-ghost btn-icon" aria-label="Giảm" style="width:28px; height:28px">−</button><span style="margin:0 6px">${it.qty}</span><button class="btn btn-ghost btn-icon" aria-label="Tăng" style="width:28px; height:28px">+</button></div>
        </div>
        <div>
          <div class="price">${money(it.price*it.qty)}</div>
          <div style="text-align:right; margin-top:6px"><button class="btn btn-ghost btn-icon" aria-label="Xoá">🗑️</button></div>
        </div>`;
      const [minus, plus] = el.querySelectorAll('button.btn-icon');
      minus.addEventListener('click', ()=> changeQty(it.id, -1));
      plus.addEventListener('click', ()=> changeQty(it.id, +1));
      el.querySelector('button[aria-label="Xoá"]').addEventListener('click', ()=> removeFromCart(it.id));
      return el;
    }
    function miniThumb(color){ return `<svg width="26" height="26" viewBox="0 0 26 26"><rect x="8" y="5" width="10" height="12" rx="2" fill="${color}" stroke="#d8d8d8"/><rect x="9" y="17" width="8" height="5" rx="2" fill="#f3c27a"/></svg>` }

    // ===== Helpers =====
    function money(n){ return n.toLocaleString('vi-VN') + '₫' }
    function byId(id){ return document.getElementById(id) }
    function save(k,v){ localStorage.setItem(k, JSON.stringify(v)) }
    function load(k,def){ try{ return JSON.parse(localStorage.getItem(k)) ?? def }catch{ return def } }

    function checkout(){
      if(!state.cart.length){ alert('Giỏ hàng trống. Thêm vài sản phẩm trước nhé!'); return; }
      alert('Đặt hàng thành công! Spa sẽ liên hệ xác nhận và giao trong ngày.');
      state.cart = []; save('cart', state.cart); updateCartUI(); toggleCart(false);
    }

    function copyCode(){ navigator.clipboard.writeText('THAM15'); localStorage.setItem('promo','THAM15'); updateCartUI(); alert('Đã sao chép mã THAM15. Mã sẽ tự áp dụng khi thanh toán!') }
    function scrollToMenu(){ document.getElementById('menu').scrollIntoView({behavior:'smooth'}) }

    // ===== Reviews Text =====
    byId('r1').innerHTML = `${stars(5)} <span style="opacity:.85; margin-left:6px">“Da sáng đều sau 3 tuần, không kích ứng. Sẽ mua lại!”</span>`
    byId('r2').innerHTML = `${stars(5)} <span style="opacity:.85; margin-left:6px">“Serum HA cấp ẩm đỉnh, makeup bám tốt hơn hẳn.”</span>`
    byId('r3').innerHTML = `${stars(4.5)} <span style="opacity:.85; margin-left:6px">“Kem tái tạo đêm dịu – sáng dậy da căng mướt.”</span>`

    // ===== Theme toggle (CSS variables) =====
    const THEME_KEY = 'thamsa-theme';
    const toggleThemeBtn = document.getElementById('toggleTheme');
    const storedTheme = localStorage.getItem(THEME_KEY) || 'dark';
    applyTheme(storedTheme);
    toggleThemeBtn.addEventListener('click', ()=>{
      const t = document.documentElement.getAttribute('data-theme')==='light' ? 'dark' : 'light';
      applyTheme(t);
    });
    function applyTheme(t){ document.documentElement.setAttribute('data-theme', t); localStorage.setItem(THEME_KEY, t); }

    // Init
    render(); updateCartUI();
    // === FX Scripts: reveal on scroll, 3D tilt, parallax, progress bar ===
  function setupFX(){
    if(window.__fxInit) return; window.__fxInit = true;
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    // Reveal elements
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('inview'); io.unobserve(e.target); } });
    },{threshold:.15, rootMargin:'0px 0px -10% 0px'});

    document.querySelectorAll('.section, .hero .grid-hero > *').forEach(el=>{ el.classList.add('fx-reveal'); io.observe(el); });
    document.querySelectorAll('.card').forEach(el=>{ el.classList.add('fx-reveal'); io.observe(el); if(!prefersReduced) addTilt(el); });

    // Observe new cards when filtering/sorting
    const grid = document.getElementById('grid');
    const mo = new MutationObserver(muts=>{
      muts.forEach(m=> m.addedNodes.forEach(n=>{
        if(n.classList && n.classList.contains('card')){ n.classList.add('fx-reveal'); io.observe(n); if(!prefersReduced) addTilt(n); }
      }))
    });
    mo.observe(grid, {childList:true});

    // Parallax hero art
    const hero = document.querySelector('.hero');
    const art = document.querySelector('.hero-art');
    if(art && !prefersReduced){
      hero.addEventListener('mousemove', (e)=>{
        const r = hero.getBoundingClientRect();
        const x = (e.clientX - r.left)/r.width - .5;
        const y = (e.clientY - r.top)/r.height - .5;
        art.style.transform = `translate3d(${x*10}px, ${y*10}px, 0)`;
      });
      hero.addEventListener('mouseleave', ()=>{ art.style.transform = ''; });
    }

    // Scroll progress + nav shadow
    const bar = document.getElementById('progressBar');
    const nav = document.querySelector('.nav');
    function onScroll(){
      const st = document.documentElement.scrollTop || document.body.scrollTop;
      const max = (document.documentElement.scrollHeight - document.documentElement.clientHeight) || 1;
      const p = st/max*100;
      if(bar) bar.style.width = p + '%';
      if(nav) nav.classList.toggle('scrolled', st>12);
    }
    window.addEventListener('scroll', onScroll, {passive:true}); onScroll();

    // 3D tilt helper
    function addTilt(el){
      let rafId = null; const max = 7;
      const reset = ()=>{ el.style.transform = ''; };
      el.addEventListener('mousemove', (ev)=>{
        const r = el.getBoundingClientRect();
        const px = (ev.clientX - r.left)/r.width - .5;
        const py = (ev.clientY - r.top)/r.height - .5;
        const rx = (+py*max).toFixed(2);
        const ry = (-px*max).toFixed(2);
        if(rafId) cancelAnimationFrame(rafId);
        rafId = requestAnimationFrame(()=>{ el.style.transform = `perspective(800px) rotateX(${rx}deg) rotateY(${ry}deg) translateY(-2px)`; });
      });
      el.addEventListener('mouseleave', reset);
    }
  }

  // Run after initial render
  try{ setupFX(); }catch(e){ console && console.warn('FX init failed', e); }
</script>
</body>
</html>
